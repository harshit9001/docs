---
title: 'API Secrets'
description: 'Create and manage API secrets for authentication'
---

## Overview

API Secrets provide a secure, permanent way to authenticate with the WaterrAI API. Unlike JWT tokens which expire, API secrets never expire and can be revoked or reactivated as needed. They are ideal for server-to-server communication and automation.

<Note>
  **Security:** API secrets are hashed using bcrypt and never stored in plain text. The plain secret is only shown once during creation - make sure to save it immediately!
</Note>

## Create API Secret

Generate a new API secret for your account. The plain secret is only returned once, so save it immediately.

<ParamField body="name" type="string" required>
  User-friendly name for the API secret (e.g., "Production API Key", "CI/CD Pipeline")
</ParamField>

```bash
curl -X POST https://api.waterrai.com/api-secrets \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Production API Key"
  }'
```

```201:json
{
  "status": "success",
  "message": "API secret created successfully",
  "data": {
    "id": 1,
    "name": "Production API Key",
    "secret": "wai_abc123def456789012345678901234567890123456789012345678901234567890",
    "secret_prefix": "wai_abc123de",
    "created_at": "2024-01-19T19:37:07.000Z",
    "warning": "Save this secret now. You won't be able to see it again!"
  }
}
```

<Warning>
  **Important:** The plain secret (`secret` field) is only returned once during creation. If you lose it, you'll need to create a new API secret. The secret cannot be retrieved later.
</Warning>

## Get All API Secrets

Retrieve all API secrets for your account. Note that the plain secret is never returned - only the prefix for identification.

<ParamField body="none" path="none" query="none">

</ParamField>

```bash
curl -X GET https://api.waterrai.com/api-secrets \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

```200:json
{
  "status": "success",
  "data": [
    {
      "id": 1,
      "name": "Production API Key",
      "secret_prefix": "wai_abc123de",
      "last_used_at": "2024-01-19T20:00:00.000Z",
      "is_active": true,
      "created_at": "2024-01-19T19:37:07.000Z",
      "updated_at": "2024-01-19T20:00:00.000Z"
    },
    {
      "id": 2,
      "name": "Development Key",
      "secret_prefix": "wai_xyz789ab",
      "last_used_at": null,
      "is_active": true,
      "created_at": "2024-01-19T18:00:00.000Z",
      "updated_at": "2024-01-19T18:00:00.000Z"
    }
  ]
}
```

## Get API Secret by ID

Retrieve details of a specific API secret.

<ParamField path="id" type="integer" required>
  The API secret ID
</ParamField>

```bash
curl -X GET https://api.waterrai.com/api-secrets/1 \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

```200:json
{
  "status": "success",
  "data": {
    "id": 1,
    "name": "Production API Key",
    "secret_prefix": "wai_abc123de",
    "last_used_at": "2024-01-19T20:00:00.000Z",
    "is_active": true,
    "created_at": "2024-01-19T19:37:07.000Z",
    "updated_at": "2024-01-19T20:00:00.000Z"
  }
}
```

## Revoke API Secret

Deactivate an API secret. Revoked secrets cannot be used for authentication but can be reactivated later.

<ParamField path="id" type="integer" required>
  The API secret ID to revoke
</ParamField>

```bash
curl -X POST https://api.waterrai.com/api-secrets/1/revoke \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

```200:json
{
  "status": "success",
  "message": "API secret revoked successfully",
  "data": {
    "id": 1,
    "name": "Production API Key",
    "is_active": false
  }
}
```

## Reactivate API Secret

Reactivate a previously revoked API secret.

<ParamField path="id" type="integer" required>
  The API secret ID to reactivate
</ParamField>

```bash
curl -X POST https://api.waterrai.com/api-secrets/1/reactivate \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

```200:json
{
  "status": "success",
  "message": "API secret reactivated successfully",
  "data": {
    "id": 1,
    "name": "Production API Key",
    "is_active": true
  }
}
```

## Delete API Secret

Permanently delete an API secret. This action cannot be undone.

<ParamField path="id" type="integer" required>
  The API secret ID to delete
</ParamField>

```bash
curl -X DELETE https://api.waterrai.com/api-secrets/1 \
  -H "Authorization: Bearer YOUR_JWT_TOKEN"
```

```200:json
{
  "status": "success",
  "message": "API secret deleted successfully"
}
```

## Using API Secrets

Once you have an API secret, use it exactly like a JWT token in the `Authorization` header:

```bash
curl -X GET https://api.waterrai.com/personas \
  -H "Authorization: Bearer wai_abc123def456789012345678901234567890123456789012345678901234567890"
```

API secrets work with all API endpoints and provide the same access as JWT tokens.

## API Secret Format

- **Prefix:** `wai_` (WaterrAI identifier)
- **Length:** 64 characters total (4 char prefix + 60 char random)
- **Format:** `wai_[64 hex characters]`
- **Example:** `wai_abc123def456789012345678901234567890123456789012345678901234567890`

## Best Practices

<CardGroup cols={2}>
  <Card title="Store Securely" icon="lock">
    Store API secrets in environment variables or secure secret management systems. Never commit them to version control.
  </Card>
  <Card title="Use Descriptive Names" icon="tag">
    Give your API secrets descriptive names (e.g., "Production", "Staging", "CI/CD") to easily identify their purpose.
  </Card>
  <Card title="Rotate Regularly" icon="rotate">
    Periodically rotate your API secrets, especially if they may have been compromised.
  </Card>
  <Card title="Revoke Unused Keys" icon="ban">
    Revoke API secrets that are no longer needed instead of deleting them, in case you need to reactivate them later.
  </Card>
</CardGroup>

<Tip>
  **Multiple Secrets:** You can create multiple API secrets for different environments or services. Each secret is independent and can be managed separately.
</Tip>
